# Calendar - Планировщик времени

Веб-приложение для визуализации и управления временными интервалами в течение дня с динамическим отображением блоков и обнаружением пересечений событий.

# TL;DR

`docker-compose up -d`

## Функциональность

### Основные возможности
- **Добавление событий** через форму с указанием названия, времени начала и окончания
- **Визуализация дня** как вертикальной временной шкалы (9:00-21:00)
- **Отображение событий** как цветных блоков на шкале пропорционально их длительности
- **Автоматическое обнаружение конфликтов** с подсветкой пересекающихся временных интервалов
- **Удаление событий** из списка и календарной визуализации
- **Responsive дизайн** для различных размеров экрана

### Валидация
- Проверка обязательности названия события
- Валидация временных интервалов (9:00-21:00)
- Проверка корректности временного диапазона (начало < окончания)

## Технический стек

- **React 18** + **TypeScript** - основа приложения
- **Vite** - сборщик и dev-сервер
- **Vitest** + **Testing Library** - тестирование
- **ESLint** - линтинг кода
- **CSS Modules** - стилизация компонентов

## Архитектура проекта

### Структура файлов
- `src/types/` - TypeScript интерфейсы и типы
- `src/constants/` - константы приложения (цвета, размеры, временные границы)
- `src/utils/` - утилитарные функции (работа со временем, обнаружение конфликтов)
- `src/hooks/` - пользовательские React хуки
- `src/components/` - React компоненты с инкапсулированными стилями
- `src/test/` - модульные и интеграционные тесты

### Ключевые компоненты
1. **App** - корневой компонент с основным состоянием
2. **EventForm** - форма добавления новых событий
3. **Calendar** - основная визуализация с временной шкалой
4. **TimeScale** - отображение часовых меток
5. **EventBlock** - отдельный блок события на календаре
6. **EventList** - список всех событий с возможностью удаления

### Пользовательские хуки
- **useEvents** - управление состоянием событий, добавление, удаление, обнаружение конфликтов

## Обоснование технических решений

### Управление состоянием
Выбрано встроенное управление состоянием React с пользовательскими хуками вместо внешних библиотек (Redux, Zustand):

**Преимущества:**
- **Простота реализации** - нет дополнительных зависимостей
- **Размер бандла** - минимальное влияние на итоговый размер
- **Производительность** - встроенные оптимизации React 18
- **Типобезопасность** - полная поддержка TypeScript
- **Тестируемость** - легкое unit-тестирование пользовательских хуков
- **Масштабируемость** - достаточно для проектов малого и среднего размера

**Подходит для проекта потому что:**
- Простая структура данных (массив событий)
- Локальное состояние без необходимости глобального store
- Ограниченное количество компонентов, взаимодействующих с состоянием

### Правила линтинга
Используется базовая конфигурация ESLint без строгих стилистических правил типа Airbnb:

**Обоснование выбора:**
- **Фокус на функциональности** - основное внимание на логике, а не на стиле кода
- **Быстрая разработка** - меньше конфликтов и споров с линтером
- **Размер проекта** - для небольшого учебного проекта базовых правил достаточно


**Текущие правила включают:**
- Базовые правила JavaScript/TypeScript
- Специфичные правила для React хуков
- Правила для React Refresh в development режиме

## Запуск проекта
Осуществляется из папки calendar `cd calendar`

### Установка зависимостей
`npm install`

### Запуск в режиме разработки
`npm run dev`

### Сборка для production
`npm run build`

### Запуск тестов
`npm run test`

### Просмотр интерфейса тестов
`npm run test:ui`

### Линтинг кода
`npm run lint`

## Тестирование

Проект включает комплексное покрытие тестами:

### Модульные тесты
- **Утилиты времени** - конвертация, валидация, позиционирование
- **Обнаружение конфликтов** - логика пересечения временных интервалов
- **Хуки** - управление состоянием событий

### Интеграционные тесты
- **Компоненты** - рендеринг, пользовательские взаимодействия
- **Формы** - валидация, отправка данных

### Покрытие
- Ключевая бизнес-логика: 100%
- Утилитарные функции: 100%
- React компоненты: основные сценарии использования

## Особенности реализации

### Алгоритм обнаружения конфликтов
Использует эффективный алгоритм сравнения временных интервалов:
- Конвертация времени в минуты для численного сравнения
- Проверка пересечения: start1 < end2 && start2 < end1
- Автоматическое обновление конфликтов при изменении списка событий

### Визуальная система
- Пропорциональное отображение событий (60px = 1 час)
- Динамическое позиционирование через CSS transforms
- Анимированная подсветка конфликтов
- Цветовая схема с автоматическим назначением цветов

### Адаптивность
- Grid Layout с автоматической перестройкой на мобильных устройствах
- Гибкая система отступов и размеров
- Оптимизированная прокрутка для длинных списков событий